@model OracleManagedDataAccess.Models.CustomerReportDto
@{
    ViewBag.Title = "Customer Info Report";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

<h2>FundTransfer Summary</h2>
@using (Html.BeginForm("UsingWebForms", "Customer", FormMethod.Post, new { id = "submitForm" }))
{
    @Html.AntiForgeryToken()

    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>Report Parameters</h5>

                    </div>
                    <div class="ibox-content">
                        <div class="row">
                            <div class="col-lg-6">
                                @*<div class="form-group" id="date_range">
                                    @Html.Label("Date Range")
                                    <div class="input-daterange input-group full-width" id="datePicker">

                                        @Html.TextBoxFor(m => m.FromDate, new { id = "fromDate", type = "text", @class = "input-sm form-control", name = "start" })
                                        <span class="input-group-addon">to</span>
                                        @Html.TextBoxFor(m => m.ToDate, new { id = "toDate", type = "text", @class = "input-sm form-control", name = "end" })
                                    </div>
                                </div>*@

                                <div class="form-group">
                                    @Html.LabelFor(m => m.CusName)
                                    @Html.TextBoxFor(m => m.CusName, new { id = "cusName", type = "text", @class = "form-control", @placeholder = "" })
                                    @Html.ValidationMessageFor(m => m.CusName, null, new { @class = "text-danger" })
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(m => m.CusFatherName)
                                    @Html.TextBoxFor(m => m.CusFatherName, new { id = "cusFatherName", type = "text", @class = "form-control", @placeholder = "" })
                                    @Html.ValidationMessageFor(m => m.CusFatherName, null, new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="row text-left" style="padding-left: 15px">
                            <input type="button" id="btnShowReport" class="btn btn-primary" value="Show Report" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <iframe id="iframeReportViewer" style="height: 3500px; width: 99%;" frameborder="0" scrolling="no"></iframe>
    </div>
}

@section scripts
{
    <script>
        $(document).ready(function() {
            $("#btnShowReport").click(function () {
                ReportValidationCheck();
            });

            //$('#date_range .input-daterange').datepicker({
            //    keyboardNavigation: false,
            //    forceParse: false,
            //    autoclose: true,
            //    format: "dd/mm/yyyy",
            //    todayHighlight: true
            //});
        });
        function ReportValidationCheck() {

            var cusName = document.getElementById("cusName").value;
            var cusFatherName = document.getElementById("cusFatherName").value;
            //var fromDate = document.getElementById("fromDate").value;
            //var toDate = document.getElementById("toDate").value;
            url = "..~/Reports/ParaUI/CustomerInfo.aspx.aspx?cusName=" + cusName + "&cusFatherName=" + cusFatherName; //+ "&fromDate=" + fromDate + "&toDate=" + toDate;
            var myframe = document.getElementById("iframeReportViewer");
            if (myframe !== null) {
                if (myframe.src) {
                    myframe.src = url;
                } else if (myframe.contentWindow !== null && myframe.contentWindow.location !== null) {
                    myframe.contentWindow.location = url;
                } else { myframe.setAttribute('src', url); }
            }
            return false;
        }
    </script>
}

